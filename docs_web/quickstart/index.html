


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.3.0">
    
    
      
        <title>Quickstart - Serverless Containers documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6e35a1a6.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#container-scaler-deployment" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="Serverless Containers documentation" class="md-header-nav__button md-logo" aria-label="Serverless Containers documentation">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Serverless Containers documentation
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Quickstart
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/JonatanEnes/ServerlessContainers/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    JonatanEnes/ServerlessContainers
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Serverless Containers documentation" class="md-nav__button md-logo" aria-label="Serverless Containers documentation">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Serverless Containers documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/JonatanEnes/ServerlessContainers/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    JonatanEnes/ServerlessContainers
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../use_case/" title="Use case" class="md-nav__link">
      Use case
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../deployment/" title="Deployment" class="md-nav__link">
      Deployment
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Quickstart
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Quickstart" class="md-nav__link md-nav__link--active">
      Quickstart
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#container-scaler-deployment" class="md-nav__link">
    Container Scaler deployment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initializing-the-containers-limit" class="md-nav__link">
    Initializing the container's limit
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initializing-state-database" class="md-nav__link">
    Initializing State Database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-the-orchestrator" class="md-nav__link">
    Start the Orchestrator
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#starting-the-services" class="md-nav__link">
    Starting the services
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transitioning-the-containers-to-serverless-instances" class="md-nav__link">
    Transitioning the containers to serverless instances
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#returning-the-containers-to-traditional-instances" class="md-nav__link">
    Returning the containers to traditional instances
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shutting-everything-down" class="md-nav__link">
    Shutting everything down
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#orchestrators-api" class="md-nav__link">
    Orchestrator's API
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../configuration/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../sponsors/" title="Sponsors" class="md-nav__link">
      Sponsors
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="http://bdwatchdog.dec.udc.es/serverless/index.html" title="Homepage (external)" class="md-nav__link">
      Homepage (external)
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../code/src/" title="Source code (external)" class="md-nav__link">
      Source code (external)
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#container-scaler-deployment" class="md-nav__link">
    Container Scaler deployment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initializing-the-containers-limit" class="md-nav__link">
    Initializing the container's limit
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initializing-state-database" class="md-nav__link">
    Initializing State Database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-the-orchestrator" class="md-nav__link">
    Start the Orchestrator
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#starting-the-services" class="md-nav__link">
    Starting the services
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transitioning-the-containers-to-serverless-instances" class="md-nav__link">
    Transitioning the containers to serverless instances
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#returning-the-containers-to-traditional-instances" class="md-nav__link">
    Returning the containers to traditional instances
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shutting-everything-down" class="md-nav__link">
    Shutting everything down
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#orchestrators-api" class="md-nav__link">
    Orchestrator's API
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/JonatanEnes/ServerlessContainers/edit/master/docs/quickstart.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                  <h1>Quickstart</h1>
                
                <p>The <strong><em>Serverless Container framework</em></strong> has been developed to be 
modular at its core, meaning that it can be scaled and adapted to 
the number of hosts and containers present in the infrastructure, 
from a few containers on a single host to dozens of containers 
spanned across multiple hosts.</p>
<p>In order to show a quickstart with an example of usage, and keep it
simple, this scenario will use 2 containers deployed on 1 host, with 
CPU as the only scaled resource. We will also consider LXD as the 
technology used to deploy the containers, that the host <em>host0</em> is 
network-reachable using such name, and that a CouchDB database is 
running and accessible as <em>couchdb</em>. It is also required to have 
resource monitoring and a time series database.</p>
<p>The requirements are overall described on the <a href="/deployment/">Deployment</a> 
Section.</p>
<h2 id="container-scaler-deployment">Container Scaler deployment</h2>
<p>First, in order to make sure that the containers are properly detected 
and supported, we have to make sure that the <em>Container Scaler</em> service
(deployed on every host) is running. </p>
<p>To do so, we can deploy 2 containers using LXD (in this case spawning 
an Ubuntu 20.04 distro): </p>
<pre><code>lxc init ubuntu:20.04 cont0
lxc init ubuntu:20.04 cont1
lxc start cont0 cont1
</code></pre>

<p>Next, from the framework's folder, start the service:</p>
<pre><code>bash scripts/services/start_node_rescaler.sh
</code></pre>

<p>To make sure that the containers are accessible to the service, you can 
open a web browser and point to the host's IP and the '8000' port and 
'/container' path. You should see something similar to:</p>
<p><img alt="container scaler API output" src="../img/quickstart/ContainerScaler.png" /> </p>
<p>As you can see, the memory, disks and network resources are also 
reported, but they will be ignored on this guide.</p>
<h2 id="initializing-the-containers-limit">Initializing the container's limit</h2>
<p>As of now, the containers could have no limits applied (-1 value) or 
some predefined limits. Such resource limits can be easily changed 
through REST API calls to the <em>Container Scaler</em> service. We can do this 
with the 'curl' command:</p>
<pre><code>curl -X PUT -H &quot;Content-Type: application/json&quot; -d '{&quot;cpu&quot;: {&quot;cpu_allowance_limit&quot;: &quot;200&quot;,&quot;cpu_num&quot;: &quot;0,1&quot;}}' \ 
http://host0:8000/container/cont0
curl -X PUT -H &quot;Content-Type: application/json&quot; -d '{&quot;cpu&quot;: {&quot;cpu_allowance_limit&quot;: &quot;200&quot;,&quot;cpu_num&quot;: &quot;2,3&quot;}}' \
http://host0:8000/container/cont1
</code></pre>

<p>Although the -d payload can also be taken from a .json file 
(see the 'NodeRescaler' folder contents).</p>
<p>However, it has to be note that this out-of-band limit changing operation 
is only intended for initializations or hard and direct limit changes for 
experimentation reasons, for example. </p>
<h2 id="initializing-state-database">Initializing State Database</h2>
<p>In order to continue with the guide, and before initializing the 
remaining microservices, we have to initialize the <em>State Database</em>. 
This is needed considering that the services are configured and tuned 
via unique documents stored on such <em>StateDatabase</em>. This allows to 
change their configuration on-the-fly. </p>
<p>To perform this initialization, you can use Python scripts that connect 
to the database and insert the proper documents, as pre-configured by 
the user.</p>
<p>To initialize the services with their respective configuration files:</p>
<pre><code>python3 quickstart/StateDatabase/services.py
</code></pre>

<p>To initialize the rules that will govern the rescaling policies, as well 
as the events and requests databases, run:</p>
<pre><code>python3 quickstart/StateDatabase/events_and_requests.py
python3 quickstart/StateDatabase/rules.py
</code></pre>

<p>Finally, in order to initialize the containers and the hosts, as well as
the container's limit thresholds, run: </p>
<pre><code>python3 quickstart/StateDatabase/limits.py
python3 quickstart/StateDatabase/structures.py
</code></pre>

<h2 id="start-the-orchestrator">Start the Orchestrator</h2>
<p>In order to check that the previous step finished correctly and that all
of the necessary documents were stored on the <em>State Database</em>, you can 
use the <em>Orchestrator</em> service as it exposes an API of the database 
contents. Start it with:</p>
<pre><code>bash scripts/services/start_orchestrator.sh
</code></pre>

<p>And then check its output by opening a browser with the instance's IP on 
which the Orchestrator was started, the port '5000' and the path 
'/structure/cont0' (to see the cont0 structure document). You should see
something similar to:</p>
<p><img alt="orchestrator API output container 0" src="../img/quickstart/OrchestratorCont0.png" /> </p>
<p>As you can see, the container is registered with resource limits of 50 
and 200 for the minimum and maximum values, respectively. It can also 
be appreciated that its configuration marks it as a non-scalable container
(<em>i.e., guard:false</em>), even though the CPU is marked as subjected to be scaled.</p>
<p>The full <em>Orchestrator</em> API can be checked below and it can be 
used via scripts that perform REST calls.</p>
<p>Using this service and the scripts, we will make sure that both of the 
containers are set to be left unscaled (unguarded):</p>
<pre><code>bash scripts/Orchestrator/Structures/set_to_unguarded.sh cont0
bash scripts/Orchestrator/Structures/set_to_unguarded.sh cont1
</code></pre>

<p>A return code of 201 ensures that the operation was carried out 
correctly. </p>
<h2 id="starting-the-services">Starting the services</h2>
<p>Now that the containers are up and running and that the <em>State Database</em> 
has been initialized, the remaining microservices can also be started.</p>
<p>First, the passive services should be started (tmux is used to de-attach 
the program from the terminal and keep the service running):</p>
<pre><code>tmux new -d -s &quot;DatabaseSnapshoter&quot; &quot;source set_pythonpath.sh; python3 src/Snapshoters/DatabaseSnapshoter.py&quot;
tmux new -d -s &quot;StructureSnapshoter&quot; &quot;source set_pythonpath.sh; python3 src/Snapshoters/StructuresSnapshoter.py&quot;
</code></pre>

<p>Both of these services show an output each time they finish a polling 
operation. The polling time can be configured with their respective 
configuration documents.</p>
<p>Secondly, the active services can be started:</p>
<pre><code>tmux new -d -s &quot;Guardian&quot; &quot;source set_pythonpath.sh; python3 src/Guardian/Guardian.py&quot;
tmux new -d -s &quot;Scaler&quot; &quot;source set_pythonpath.sh; python3 src/Rescaler/ClusterScaler.py&quot;
</code></pre>

<p>These services also output what they are doing, processing time windows 
with a time length that is configurable.</p>
<p>At this point, all of the necessary services would be running, however,
nothing would be happening as both of the containers are in an 
'unguarded' state, that is, they are being left untouched.</p>
<p>We will also deactivate the <em>Scaler</em> service for now:</p>
<pre><code>curl -s -X PUT -H &quot;Content-Type: application/json&quot; http://orchestrator:5000/service/scaler/ACTIVE -d '{&quot;value&quot;:&quot;false&quot;}'
</code></pre>

<h2 id="transitioning-the-containers-to-serverless-instances">Transitioning the containers to serverless instances</h2>
<p>In order to move the containers from following the resource management 
of a <strong>traditional instance</strong>, that is, having the initial resources 
fixed throughout their life-cycle, into a <strong>serverless environment</strong>, 
we can use the same scripts as before:</p>
<pre><code>bash scripts/Orchestrator/Structures/set_to_guarded.sh cont0
bash scripts/Orchestrator/Structures/set_to_guarded.sh cont1
</code></pre>

<p>Now, both container are being monitored by the <em>Guardian</em> service and 
their CPU limits will be scaled according to their internal CPU usage.</p>
<p>However, the <em>Guardian</em> service will only create Requests for resource 
scaling, either to lower or increase them, but not actual changes will 
be made to the resource's limits.</p>
<p>In order to apply the Requests as generated by the <em>Guardian</em> service,
we will have to rely on the <em>Scaler</em> service. To let it work, 
we will now activate it:</p>
<pre><code>curl -s -X PUT -H &quot;Content-Type: application/json&quot; http://orchestrator:5000/service/scaler/ACTIVE -d '{&quot;value&quot;:&quot;true&quot;}'
</code></pre>

<p>Now, with all of the services properly working, the serverless 
environment should be fully functional for the containers.</p>
<p>As seen in the next image, a serverless policy is being applied to the 
container as its resources are being continuously modified according to
the resource usage:</p>
<ul>
<li>1) In the beginning, the CPU is idle so that after enough time passes 
with the CPU underused, a scaling down operation is performed.</li>
<li>2) Later, the CPU is suddenly heavily used to the point that a 
bottleneck occurs. To fix this, a scaling up operation is performed. </li>
<li>3) However, after increasing the resources, the upscale operations gave
too many resources and now there is another under-utilization scenario. 
A second scaling down operation is performed to adjust them.</li>
<li>4) The usage fits perfectly between the lower and upper limits so it
is under control.</li>
<li>5) Finally, the CPU is idle again so that a last scaling down 
operation is carried out, leaving the allocated resources to the 
theoretical minimum (minimum + 2 x boundary).</li>
</ul>
<p><img alt="container example" src="../img/quickstart/scaling_examples.svg" /> </p>
<p>The behavior exposed on the image can be configured and tuned with a few,
critical parameters, as explained on the <a href="/configuration/">Configuration</a> 
Section.</p>
<h2 id="returning-the-containers-to-traditional-instances">Returning the containers to traditional instances</h2>
<p>If at any moment we want to stop the scaling from taking place for 
these containers, we have only to configure the containers to be left 
alone (unguarded):</p>
<pre><code>bash scripts/Orchestrator/Structures/set_to_unguarded.sh cont0
bash scripts/Orchestrator/Structures/set_to_unguarded.sh cont1
</code></pre>

<p>If at this point we consider that the resource limits are too low, we 
can always reset them. </p>
<h2 id="shutting-everything-down">Shutting everything down</h2>
<p>In order to shut everything down we only have to stop the Python 
programs running the microservices. </p>
<p>However, it has to be noted that it is possible to implement a 'partial'
shut down of the system by only stopping the active services. Even 
further, the system can be inactivated by only stopping or de-activating 
the <em>Scaler</em> microservice, something that we effectively did at the end 
of the <a href="/quickstart/#starting-the-services">Starting the services</a> subsection.</p>
<h2 id="orchestrators-api">Orchestrator's API</h2>
<ul>
<li>"/service/" ['GET']</li>
<li>"/service/&lt;service_name> ['GET', 'PUT']</li>
<li>"/service/&lt;service_name>/&lt;key> ['PUT']</li>
<li>"/rule/ ['GET']</li>
<li>"/rule/&lt;rule_name> ['GET']</li>
<li>"/rule/&lt;rule_name>/activate ['PUT']</li>
<li>"/rule/&lt;rule_name>/deactivate ['PUT']</li>
<li>"/structure/ ['GET']</li>
<li>"/structure/&lt;structure_name> ['GET']</li>
<li>"/structure/&lt;structure_name>/resources ['GET']</li>
<li>"/structure/&lt;structure_name>/resources/&lt;resource> ['GET']</li>
<li>"/structure/&lt;structure_name>/resources/&lt;resource>/&lt;parameter> ['GET', 'PUT']</li>
<li>"/structure/&lt;structure_name>/guard ['PUT']</li>
<li>"/structure/&lt;structure_name>/unguard ['PUT']</li>
<li>"/structure/&lt;structure_name>/resources/&lt;resource>/guard ['PUT']</li>
<li>"/structure/&lt;structure_name>/resources/&lt;resource>/unguard ['PUT']</li>
<li>"/structure/&lt;structure_name>/resources/guard ['PUT']</li>
<li>"/structure/&lt;structure_name>/resources/unguard ['PUT']</li>
<li>"/structure/&lt;structure_name>/limits ['GET']</li>
<li>"/structure/&lt;structure_name>/limits/&lt;resource> ['GET']</li>
<li>"/structure/&lt;structure_name>/limits/&lt;resource>/boundary ['PUT']</li>
<li>"/structure/&lt;structure_name>/guard_policy/serverless ['PUT']</li>
<li>"/structure/&lt;structure_name>/guard_policy/fixed ['PUT']</li>
<li>"/heartbeat ['GET']</li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../deployment/" title="Deployment" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Deployment
              </div>
            </div>
          </a>
        
        
          <a href="../configuration/" title="Configuration" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Configuration
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 - 2020 Jonatan Enes
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.d710d30a.min.js"></script>
      <script src="../assets/javascripts/bundle.a14cc5fd.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.7a2ea5ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>